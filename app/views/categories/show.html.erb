<div class="container" style="padding: 2rem 1rem;">
  <div class="mb-8">
    <%= link_to categories_path, class: "text-indigo-600 hover:text-indigo-800 inline-flex items-center mb-4", style: "text-decoration: none; color: var(--primary); display: inline-flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem;" do %>
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
      </svg>
      <span>カテゴリ一覧に戻る</span>
    <% end %>

    <div class="flex items-center gap-4 mb-4" style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
      <div style="width: 60px; height: 60px; border-radius: 1rem; background-color: <%= @category.color %>; opacity: 0.2;"></div>
      <div>
        <h1 class="text-3xl font-bold text-gray-900" style="font-size: 2rem; font-weight: 700;">
          <%= @category.name %>
        </h1>
        <p class="text-gray-600"><%= @category.description %></p>
      </div>
    </div>

    <!-- Stats -->
    <div class="stats-grid mb-6" style="margin-bottom: 1.5rem;">
      <div class="stat-card">
        <div class="stat-label">投稿数</div>
        <div class="stat-value" style="color: <%= @category.color %>;"><%= @posts.total_count %></div>
      </div>
      
      <div class="stat-card">
        <div class="stat-label">平均スコア</div>
        <div class="stat-value" style="color: <%= @category.color %>;">
          <%= @average_score || "—" %>
        </div>
      </div>
    </div>
  </div>

  <!-- Posts List -->
  <% if @posts.any? %>
    <div class="space-y-4">
      <% @posts.each do |post| %>
        <%= link_to post, class: "card block", style: "text-decoration: none; color: inherit; display: block; transition: transform 0.2s, box-shadow 0.2s;" do %>
          <div class="flex justify-between items-start" style="display: flex; justify-content: space-between; gap: 1.5rem;">
            <div style="flex: 1;">
              <div class="flex items-center gap-2 mb-2" style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                <span class="text-sm text-gray-500"><%= post.created_at.strftime('%Y/%m/%d') %></span>
                <% if post.ai_evaluated %>
                  <span class="badge badge-success">AI評価済み</span>
                <% end %>
              </div>
              
              <h3 class="text-xl font-bold text-gray-900 mb-2" style="font-size: 1.25rem; font-weight: 700; margin-bottom: 0.5rem;">
                <%= post.title %>
              </h3>
              
              <p class="text-gray-600 line-clamp-2" style="color: var(--gray-600); overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;">
                <%= post.content %>
              </p>
            </div>
            
            <% if post.ai_score %>
              <div class="score-circle rank-<%= post.ai_score.rank %>" style="width: 80px; height: 80px;">
                <div class="score-value" style="font-size: 1.75rem;"><%= post.ai_score.total_score %></div>
                <div class="score-label">点</div>
              </div>
            <% end %>
          </div>
        <% end %>
      <% end %>
    </div>

    <!-- Pagination -->
    <div class="text-center mt-8" style="text-align: center; margin-top: 2rem;">
      <%= paginate @posts %>
    </div>
  <% else %>
    <div class="card text-center py-12" style="padding: 3rem 0; text-align: center;">
      <div class="text-6xl mb-4" style="font-size: 4rem; margin-bottom: 1rem;">📝</div>
      <p class="text-gray-600 mb-4">このカテゴリにはまだ投稿がありません</p>
      <%= link_to "新しい失敗ログを投稿する", new_post_path, class: "btn btn-primary" %>
    </div>
  <% end %>
</div>

<style>
  .card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }
</style>